<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CaribbeanTechS – Private AI Assistant</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <header>
      <div class="header-copy">
        <h1>CaribbeanTechS – Private AI Assistant</h1>
        <p class="subtitle">One-click local setup powered by Ollama.</p>
      </div>
      <button id="startSetupBtn" class="primary">Start Setup</button>
    </header>

    <main>
      <section id="setupView" class="panel visible">
        <h2>First-Run Wizard</h2>
        <div class="backend-selector">
          <label for="backendSelect">Runtime engine</label>
          <select id="backendSelect">
            <option value="ollama">Ollama (default)</option>
            <option value="python">Python llama.cpp sidecar</option>
          </select>
          <p class="hint">
            Switch to the Python sidecar to run GGUF models via llama-cpp without Ollama.
          </p>
        </div>
        <ol class="steps">
          <li data-step="scan">Detect hardware</li>
          <li data-step="storage">Prepare storage</li>
          <li data-step="install">Install &amp; start Ollama</li>
          <li data-step="model">Download model</li>
          <li data-step="complete">Launch chat</li>
        </ol>

        <div class="step-content">
          <div id="stepStatus">Press "Start Setup" to begin.</div>
          <div class="hardware-summary">
            <h3>Hardware snapshot</h3>
            <pre id="hardwareOutput">—</pre>
          </div>
          <div class="chat-storage">
            <div class="chat-storage-info">
              <label for="chatDirDisplay">Chat history folder</label>
              <p id="chatDirDisplay">Default: ~/PrivateAI/Chats</p>
            </div>
            <button type="button" id="chooseChatDirBtn" class="secondary">Choose Folder</button>
          </div>
          <div class="model-selector">
            <label for="modelSelect">Recommended model</label>
            <select id="modelSelect">
              <option value="llama3.1:8b">Llama 3.1 8B — balanced</option>
              <option value="phi3:mini">Phi-3 Mini — lightweight</option>
              <option value="deepseek-r1:7b">DeepSeek R1 7B — reasoning</option>
            </select>
          </div>
          <div class="log-pane">
            <h3>Activity log</h3>
            <ul id="logEntries"></ul>
          </div>
        </div>
      </section>

      <section id="chatView" class="panel hidden">
        <div class="chat-layout">
          <aside class="conversation-sidebar">
            <div class="conversation-header">
              <h2>Conversations</h2>
              <button type="button" id="newConversationBtn" class="secondary small">New chat</button>
            </div>
            <div class="conversation-scroll">
              <div id="conversationList" class="conversation-list"></div>
              <p id="conversationEmpty" class="conversation-empty">No conversations yet.</p>
            </div>
          </aside>
          <div class="chat-pane">
            <div class="chat-header">
              <div class="chat-header-text">
                <h2 id="conversationTitle">New chat</h2>
                <p class="chat-subtitle">Speak with your local assistant.</p>
              </div>
              <div class="chat-meta">
                <button type="button" id="changeChatDirBtn" class="secondary small icon-button" title="Choose chat storage folder">
                  Chat folder
                </button>
                <span id="activeModel">Model: —</span>
                <button id="resetWizardBtn" class="secondary">Re-run setup</button>
              </div>
            </div>
            <div class="chat-history" id="chatHistory"></div>
            <form id="chatForm">
              <textarea id="chatInput" placeholder="Ask anything..." rows="3"></textarea>
              <div class="controls">
                <button type="submit" id="sendBtn" disabled>Send</button>
              </div>
            </form>
          </div>
        </div>
      </section>
    </main>

    <script src="/app.js" type="module"></script>
  </body>
</html>
